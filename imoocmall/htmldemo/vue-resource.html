<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
  <!-- 最新版本的 Bootstrap 核心 CSS 文件 -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@3.3.7/dist/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
  <script src="../node_modules/vue/dist/vue.js"></script>
  <script src="../node_modules/vue-resource/dist/vue-resource.js"></script>
</head>
<body>
    <div id="app" class="container">
      <h1>vue-resource插件</h1>
      <a href="javascript:;" class="btn btn-primary" v-on:click="get">get请求</a>
      <a href="javascript:;" class="btn btn-primary" @click="post">post请求</a>
      <a href="javascript:;" class="btn btn-primary" @click="jsonp">Jsonp请求(没测通，暂时放这里)</a>
      <div>{{msg}}</div>
    </div>
    <script>
      new Vue({
        el: "#app",
        data: {
          msg: ''
        },
        http: {
          root: ""  //配置默认的公共url地址，比如www.baidu.com/ x  ，  www.baidu.com/b  ,  那么就把前面重复的放在一起
        },
        mounted: function () {
//          拦截器
          Vue.http.interceptors.push(function (request,next){
            console.log("request init");
            next(function (response){
              console.log("response init.");
              return response;
            })
          });
        },
        methods: {
          get: function(){
            this.$http.get("package.json",{
              params:{userId: "101"},
              headers:{
                 token: "333i am token"
              },
            }).then(
              res=>{
                this.msg = res.data
               },
               error=>{
                this.msg =error
               }
            )
          },

          post: function () {
            this.$http.post(
              "package.json",
              {
                userId:"102"
              },
              {
                headers:{
                  access_token:"abc"
                }
              }
            ).then(function(res){
              this.msg = res.data;
            })
          },

          jsonp: function () {
            this.$http.jsonp('http://www.liulongbin.top:3005/api/getprodlist').then(result=>{
              console.log(result.body)
            })
          }
        }
      })
    </script>
</body>
</html>
